<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd
                        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<property name="now" value="now()" dbms="h2" />

	<property name="now" value="current_timestamp" dbms="postgresql" />

	<property name="floatType" value="float4" dbms="postgresql, h2" />
	<property name="floatType" value="float" dbms="mysql, oracle, mssql" />

	<changeSet id="20200408095104-0" author="arte">
		<createSequence sequenceName="seq_tb_instances" startValue="1" incrementBy="50" />
	</changeSet>

	<changeSet id="20200408095104-1" author="arte">
		<createTable tableName="tb_instances">
			<column name="id" type="bigint" autoIncrement="${autoIncrement}">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="created_by" type="VARCHAR(50)">
				<constraints nullable="false" />
			</column>
			<column name="created_date" type="timestamp">
				<constraints nullable="false" />
			</column>
			<column name="last_modified_by" type="VARCHAR(50)" />
			<column name="last_modified_date" type="timestamp" />
			<column name="opt_lock" type="BIGINT" />
			<column name="base_period" type="VARCHAR(255)" />
			<column name="code" type="VARCHAR(255)">
				<constraints nullable="false" />
			</column>
			<column name="internal_inventory_date" type="timestamp" />
			<column name="inventory_date" type="timestamp" />
			<column name="order_idx" type="INT">
				<constraints nullable="false" />
			</column>
			<column name="proc_status" type="VARCHAR(255)">
				<constraints nullable="false" />
			</column>
			<column name="update_date" type="timestamp" />
			<column name="urn" type="VARCHAR(4000)">
				<constraints nullable="false" />
			</column>
			<column name="uuid" type="VARCHAR(36)">
				<constraints nullable="false" />
			</column>
			<column name="accuracy_overall_fk" type="BIGINT" />
			<column name="acronym_fk" type="BIGINT" />
			<column name="adjustment_fk" type="BIGINT" />
			<column name="class_system_fk" type="BIGINT" />
			<column name="coher_internal_fk" type="BIGINT" />
			<column name="coher_x_domain_fk" type="BIGINT" />
			<column name="coll_method_fk" type="BIGINT" />
			<column name="comment_fk" type="BIGINT" />
			<column name="completeness_fk" type="BIGINT" />
			<column name="cost_burden_fk" type="BIGINT" />
			<column name="data_compilation_fk" type="BIGINT" />
			<column name="data_description_fk" type="BIGINT" />
			<column name="data_validation_fk" type="BIGINT" />
			<column name="doc_method_fk" type="BIGINT" />
			<column name="geographic_comparability_fk" type="BIGINT" />
			<column name="instance_type_fk" type="BIGINT" />
			<column name="nonsampling_err_fk" type="BIGINT" />
			<column name="notes_fk" type="BIGINT" />
			<column name="operation_fk" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="punctuality_fk" type="BIGINT" />
			<column name="quality_assmnt_fk" type="BIGINT" />
			<column name="quality_assure_fk" type="BIGINT" />
			<column name="quality_doc_fk" type="BIGINT" />
			<column name="sampling_err_fk" type="BIGINT" />
			<column name="stat_conc_def_fk" type="BIGINT" />
			<column name="statistical_population_fk" type="BIGINT" />
			<column name="survey_source_fk" type="BIGINT" />
			<column name="temporal_comparability_fk" type="BIGINT" />
			<column name="timeliness_fk" type="BIGINT" />
			<column name="title_fk" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="user_needs_fk" type="BIGINT" />
			<column name="user_sat_fk" type="BIGINT" />
		</createTable>
	</changeSet>

	<changeSet id="20200408095104-2" author="arte">
		<createTable tableName="tb_instances_costs">
			<column name="tb_instances" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="cost_fk" type="BIGINT">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="20200408095104-3" author="arte">
		<createTable tableName="tb_ei_class_system_lists">
			<column name="tb_instances" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="class_system_list_fk" type="BIGINT">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="20200408095104-4" author="arte">
		<createTable tableName="tb_ei_conc_def_lists">
			<column name="tb_instances" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="stat_conc_def_list_fk" type="BIGINT">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="20200408095104-5" author="arte">
		<createTable tableName="tb_ei_freq_coll">
			<column name="tb_instances" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="freq_coll_fk" type="BIGINT">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="20200408095104-6" author="arte">
		<createTable tableName="tb_ei_geo_granularities">
			<column name="tb_instances" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="geographic_granularity_fk" type="BIGINT">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="20200408095104-7" author="arte">
		<createTable tableName="tb_ei_inf_suppliers">
			<column name="tb_instances" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="information_suppliers_fk" type="BIGINT">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="20200408095104-8" author="arte">
		<createTable tableName="tb_ei_statistical_units">
			<column name="tb_instances" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="statistical_unit_fk" type="BIGINT">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="20200408095104-9" author="arte">
		<createTable tableName="tb_ei_time_granularities">
			<column name="tb_instances" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="temporal_granularity_fk" type="BIGINT">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="20200408095104-10" author="arte">
		<createTable tableName="tb_ei_units_measure">
			<column name="tb_instances" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="unit_measure_fk" type="BIGINT">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>

	<changeSet id="20200408095104-11" author="arte">
		<addPrimaryKey columnNames="tb_instances, class_system_list_fk" tableName="tb_ei_class_system_lists" />
		<addPrimaryKey columnNames="tb_instances, stat_conc_def_list_fk" tableName="tb_ei_conc_def_lists" />
		<addPrimaryKey columnNames="tb_instances, freq_coll_fk" tableName="tb_ei_freq_coll" />
		<addPrimaryKey columnNames="tb_instances, geographic_granularity_fk" tableName="tb_ei_geo_granularities" />
		<addPrimaryKey columnNames="tb_instances, information_suppliers_fk" tableName="tb_ei_inf_suppliers" />
		<addPrimaryKey columnNames="tb_instances, statistical_unit_fk" tableName="tb_ei_statistical_units" />
		<addPrimaryKey columnNames="tb_instances, temporal_granularity_fk" tableName="tb_ei_time_granularities" />
		<addPrimaryKey columnNames="tb_instances, unit_measure_fk" tableName="tb_ei_units_measure" />
		<addPrimaryKey columnNames="tb_instances, cost_fk" tableName="tb_instances_costs" />
	</changeSet>

	<changeSet id="20200408095104-12" author="arte">
		<addUniqueConstraint columnNames="uuid" constraintName="UC_TB_INSTANCESUUID_COL" tableName="tb_instances" />
	</changeSet>

	<changeSet id="20200408095104-13" author="arte">
		<addForeignKeyConstraint baseColumnNames="geographic_granularity_fk" baseTableName="tb_ei_geo_granularities"
			constraintName="FK65sttfceeaej96pyrs5tro2vv" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_external_items" />
		<addForeignKeyConstraint baseColumnNames="freq_coll_fk" baseTableName="tb_ei_freq_coll"
			constraintName="FK6mb1fn64hq5v6jn4wuiamkexv" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_external_items" />
		<addForeignKeyConstraint baseColumnNames="class_system_list_fk" baseTableName="tb_ei_class_system_lists"
			constraintName="FK8e2nqibh11o9re88rp8ilvhda" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_external_items" />
		<addForeignKeyConstraint baseColumnNames="unit_measure_fk" baseTableName="tb_ei_units_measure"
			constraintName="FK8iicpvh0ox63yc9humf8u4wmg" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_external_items" />
		<addForeignKeyConstraint baseColumnNames="tb_instances" baseTableName="tb_ei_class_system_lists"
			constraintName="FK_TB_EI_CLASS_SYSTEM_LISTS_54" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_instances" />
		<addForeignKeyConstraint baseColumnNames="tb_instances" baseTableName="tb_ei_conc_def_lists"
			constraintName="FK_TB_EI_CONC_DEF_LISTS_TB_I87" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_instances" />
		<addForeignKeyConstraint baseColumnNames="tb_instances" baseTableName="tb_ei_freq_coll"
			constraintName="FK_TB_EI_FREQ_COLL_TB_INSTAN69" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_instances" />
		<addForeignKeyConstraint baseColumnNames="tb_instances" baseTableName="tb_ei_geo_granularities"
			constraintName="FK_TB_EI_GEO_GRANULARITIES_T52" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_instances" />
		<addForeignKeyConstraint baseColumnNames="tb_instances" baseTableName="tb_ei_inf_suppliers"
			constraintName="FK_TB_EI_INF_SUPPLIERS_TB_IN63" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_instances" />
		<addForeignKeyConstraint baseColumnNames="tb_instances" baseTableName="tb_ei_statistical_units"
			constraintName="FK_TB_EI_STATISTICAL_UNITS_T73" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_instances" />
		<addForeignKeyConstraint baseColumnNames="tb_instances" baseTableName="tb_ei_time_granularities"
			constraintName="FK_TB_EI_TIME_GRANULARITIES_40" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_instances" />
		<addForeignKeyConstraint baseColumnNames="tb_instances" baseTableName="tb_ei_units_measure"
			constraintName="FK_TB_EI_UNITS_MEASURE_TB_IN48" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_instances" />
		<addForeignKeyConstraint baseColumnNames="accuracy_overall_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_ACCURACY_OVE59" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="acronym_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_ACRONYM_FK" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="adjustment_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_ADJUSTMENT_FK" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="class_system_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_CLASS_SYSTEM68" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="coher_internal_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_COHER_INTERN31" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="coher_x_domain_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_COHER_X_DOMA87" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="coll_method_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_COLL_METHOD_FK" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_lis_coll_methods" />
		<addForeignKeyConstraint baseColumnNames="comment_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_COMMENT_FK" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="completeness_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_COMPLETENESS74" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="tb_instances" baseTableName="tb_instances_costs"
			constraintName="FK_TB_INSTANCES_COSTS_TB_INS32" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_instances" />
		<addForeignKeyConstraint baseColumnNames="cost_burden_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_COST_BURDEN_FK" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="data_compilation_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_DATA_COMPILA00" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="data_description_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_DATA_DESCRIP53" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="data_validation_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_DATA_VALIDAT76" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="doc_method_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_DOC_METHOD_FK" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="geographic_comparability_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_GEOGRAPHIC_C80" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="instance_type_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_INSTANCE_TYP70" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_lis_instance_types" />
		<addForeignKeyConstraint baseColumnNames="nonsampling_err_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_NONSAMPLING_24" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="notes_fk" baseTableName="tb_instances" constraintName="FK_TB_INSTANCES_NOTES_FK"
			deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="operation_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_OPERATION_FK" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_operations" />
		<addForeignKeyConstraint baseColumnNames="punctuality_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_PUNCTUALITY_FK" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="quality_assmnt_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_QUALITY_ASSM60" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="quality_assure_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_QUALITY_ASSU87" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="quality_doc_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_QUALITY_DOC_FK" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="sampling_err_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_SAMPLING_ERR17" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="statistical_population_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_STATISTICAL_99" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="stat_conc_def_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_STAT_CONC_DE76" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="survey_source_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_SURVEY_SOURC94" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_lis_survey_sources" />
		<addForeignKeyConstraint baseColumnNames="temporal_comparability_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_TEMPORAL_COM97" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="timeliness_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_TIMELINESS_FK" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="title_fk" baseTableName="tb_instances" constraintName="FK_TB_INSTANCES_TITLE_FK"
			deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="user_needs_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_USER_NEEDS_FK" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="user_sat_fk" baseTableName="tb_instances"
			constraintName="FK_TB_INSTANCES_USER_SAT_FK" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_international_strings" />
		<addForeignKeyConstraint baseColumnNames="cost_fk" baseTableName="tb_instances_costs"
			constraintName="FKa91afvrsc233dx2gowoy4qylc" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_lis_costs" />
		<addForeignKeyConstraint baseColumnNames="statistical_unit_fk" baseTableName="tb_ei_statistical_units"
			constraintName="FKdsu1iv84jau5ha0bic0e6nj0m" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_external_items" />
		<addForeignKeyConstraint baseColumnNames="temporal_granularity_fk" baseTableName="tb_ei_time_granularities"
			constraintName="FKlcpq3jdsta6p04d0nsr12gq7d" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_external_items" />
		<addForeignKeyConstraint baseColumnNames="information_suppliers_fk" baseTableName="tb_ei_inf_suppliers"
			constraintName="FKmsv14u0v6s0w2p5jighdsbd6o" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_external_items" />
		<addForeignKeyConstraint baseColumnNames="stat_conc_def_list_fk" baseTableName="tb_ei_conc_def_lists"
			constraintName="FKnmeb8hs214beisj7oxh5prskd" deferrable="false" initiallyDeferred="false" referencedColumnNames="id"
			referencedTableName="tb_external_items" />
	</changeSet>

</databaseChangeLog>